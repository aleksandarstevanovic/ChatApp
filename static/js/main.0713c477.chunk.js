(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,n){e.exports=n(479)},206:function(e,t,n){},207:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAV1BMVEUAAAAAef8Ae/8Ae/8Acf8Aev8Aev8Adv8Aev8Aev8AfP8Aev8Aef8Ae/8AeP8AeP8Ae/8Aev8Aev8Aef8Aev8Aev8AgP8Abf8AeP8Aev8Aef8Aev8AAAD0TBERAAAAG3RSTlMAN8xmCeiIHPmqRPekNhEzVXeZu939CAci8zvVin8nAAAAAWJLR0QAiAUdSAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+MFGQAEL3ZIrLQAAAEESURBVFjD7ZfbDoIwEEQrKIJ4v8v8/39qojEI3e5ON74x7z3MKbS0IUwJMy8ARTn3AYBFtfQBgLpZ+QCvZJvgm0wT9JJlgt/wJhiGNcE4nAmiIUwgxGwCMUYTpGIxQTq6CbRoJipAM7EAkiY2QMLEChBNCEDcpKUIqNebIWG72x+Op/OFMLnG5uJ2X5VVUzyc78RaSF8neiHBhCnE7F1CIfveJQK6vynkT6L1NXb8I6Xu3k+5NQ98dx8tJmp4bN6J4fF5N3eXvpn87gQgufDyu9sAzl+bZdPI764AnAcM44YnAIzdJYDzmEd0jwCcR13nYZvv3gc4LxzOK09290/c174p4QllLZhNLmS29QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wNS0yNFQyMjowNDo0NyswMjowMImoZZYAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDUtMjRUMjI6MDQ6NDcrMDI6MDD49d0qAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="},223:function(e,t){},225:function(e,t){},249:function(e,t){},256:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=256},263:function(e,t){},264:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=264},299:function(e,t){},300:function(e,t){},386:function(e,t){},479:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(80),o=n.n(r),c=(n(206),n(19)),i=n(20),u=n(23),m=n(21),l=n(12),h=n(22),d=(n(207),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:""},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.username)}},{key:"render",value:function(){return s.a.createElement("div",{className:"form-container"},s.a.createElement("h1",null,"Sign in"),s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},s.a.createElement("input",{type:"text",name:"username",onChange:this.handleChange,placeholder:"Enter username",className:"input"}),s.a.createElement("button",{className:"submit sing-in-button"},"Sign in")))}}]),t}(a.Component)),A=n(81),b=n(113),f=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){var e=o.a.findDOMNode(this);e.scrollTop=e.scrollHeight}},{key:"render",value:function(){var e=this;return this.props.roomId?s.a.createElement("ul",{className:"message-list"},this.props.messages.map(function(t,n){return s.a.createElement("li",{key:n},s.a.createElement("p",{className:"message-sender"},t.senderId),s.a.createElement("p",{className:e.props.currentUser.id===t.senderId?"sent-messages":"received-messages"},t.text))}),s.a.createElement("li",null)):s.a.createElement("div",{className:"message-list"},s.a.createElement("div",{className:"join-room"},"\u2190Join a room!"))}}]),t}(a.Component),p=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={message:""},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({message:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.message),this.setState({message:""})}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit,className:"input-field"},s.a.createElement("input",{disabled:this.props.disabled,className:"message-input",type:"text",onChange:this.handleChange,value:this.state.message,placeholder:"Type a message..."}),s.a.createElement("button",{className:"submit send-button",disabled:this.props.disabled}))}}]),t}(a.Component),v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"room-list"},s.a.createElement("ul",null,s.a.createElement("h2",null,"ROOMS:"),s.a.createElement("hr",null),this.props.rooms.map(function(t){var n=e.props.roomId===t.id?"active":"";return s.a.createElement("li",{key:t.id,className:"room "+n},s.a.createElement("a",{onClick:function(){return e.props.subscribeToRoom(t.id)},href:"#"},"#",t.name))})))}}]),t}(a.Component),g=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={roomName:""},e.handleChange=e.handleChange.bind(Object(l.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(l.a)(e)),e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({roomName:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.createRoom(this.state.roomName),this.setState({roomName:""})}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit,className:"new-room-form"},s.a.createElement("input",{className:"room-input",value:this.state.roomName,onChange:this.handleChange,type:"text",placeholder:"Create a room"}),s.a.createElement("button",{className:"submit room-button"}))}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentUser:null,currentRoom:null,messages:[],users:[],joinableRooms:[],joinedRooms:[]},n.addMessage=n.addMessage.bind(Object(l.a)(n)),n.subscribeToRoom=n.subscribeToRoom.bind(Object(l.a)(n)),n.getRooms=n.getRooms.bind(Object(l.a)(n)),n.createRoom=n.createRoom.bind(Object(l.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;new b.ChatManager({instanceLocator:"v1:us1:80da3bcd-d4e3-46e8-93e7-c42957efd993",userId:this.props.currentId,tokenProvider:new b.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/80da3bcd-d4e3-46e8-93e7-c42957efd993/token"})}).connect().then(function(t){e.setState({currentUser:t}),e.getRooms()}).catch(function(e){return console.log(e)})}},{key:"addMessage",value:function(e){this.state.currentUser.sendMessage({text:e,roomId:this.state.currentRoom}).catch(function(e){return console.error("error",e)})}},{key:"getRooms",value:function(){var e=this;this.state.currentUser.getJoinableRooms().then(function(t){e.setState({joinableRooms:t,joinedRooms:e.state.currentUser.rooms})}).catch(function(e){return console.log(e)})}},{key:"subscribeToRoom",value:function(e){var t=this;return this.setState({messages:[]}),this.state.currentUser.subscribeToRoom({roomId:e,messageLimit:100,hooks:{onMessage:function(n){t.setState({messages:[].concat(Object(A.a)(t.state.messages),[n]),currentRoom:e})}}})}},{key:"createRoom",value:function(e){var t=this;e.length>0&&this.state.currentUser.createRoom({name:e}).then(function(e){t.subscribeToRoom(e.id),t.getRooms(),t.setState({currentRoom:e.id})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"proba"},s.a.createElement(v,{roomId:this.state.currentRoom,subscribeToRoom:this.subscribeToRoom,rooms:[].concat(Object(A.a)(this.state.joinableRooms),Object(A.a)(this.state.joinedRooms))}),s.a.createElement(g,{createRoom:this.createRoom}),s.a.createElement(f,{currentUser:this.state.currentUser,roomId:this.state.currentRoom,messages:this.state.messages}),s.a.createElement(p,{disabled:!this.state.currentRoom,className:"input-field",onSubmit:this.addMessage}))}}]),t}(a.Component),j=new(n(208).default)({instanceLocator:"v1:us1:80da3bcd-d4e3-46e8-93e7-c42957efd993",key:"188a2026-3224-4f8b-b87c-22d477a884d2:KcRK0XLchyoP2SwhwFgIyHy6ETJz48OGESBT0NGIp/M="}),E=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentUsername:"",currentId:"",currentView:"signup"},n.changeView=n.changeView.bind(Object(l.a)(n)),n.createUser=n.createUser.bind(Object(l.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"createUser",value:function(e){var t=this;j.createUser({id:e,name:e}).then(function(n){t.setState({currentUsername:e,currentId:e,currentView:"chatApp"})}).catch(function(n){400===n.status?t.setState({currentUsername:e,currentId:e,currentView:"chatApp"}):console.log(n.status)})}},{key:"changeView",value:function(e){this.setState({currentView:e})}},{key:"render",value:function(){var e="";return"signup"===this.state.currentView?e=s.a.createElement(d,{onSubmit:this.createUser}):"chatApp"===this.state.currentView&&(e=s.a.createElement(O,{currentId:this.state.currentId})),s.a.createElement("div",{className:"App"},e)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[201,1,2]]]);
//# sourceMappingURL=main.0713c477.chunk.js.map