(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{328:function(e,t,n){e.exports=n(693)},333:function(e,t,n){},420:function(e,t){},422:function(e,t){},464:function(e,t){},471:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=471},478:function(e,t){},479:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=479},514:function(e,t){},515:function(e,t){},601:function(e,t){},693:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),s=(n(333),n(88)),u=n(89),i=n(94),l=n(90),m=n(95),p=n(28),d=n(732),f=n(734),b=n(731),v=n(735),h=n(733),E=n(736),O=n(320),g=n.n(O),y=n(695),w=n(694),x=n(730),j=Object(w.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),R=function(e){var t,n=j();return a.a.createElement(x.a,{component:"main",maxWidth:"xs"},a.a.createElement(b.a,null),a.a.createElement("div",{className:n.paper},a.a.createElement(d.a,{className:n.avatar},a.a.createElement(g.a,null)),a.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign in"),a.a.createElement("form",{className:n.form,onSubmit:function(n){e.handleSubmit(n,t)}},a.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Enter username",name:"username",autoFocus:!0,inputRef:function(e){t=e}}),a.a.createElement(h.a,{control:a.a.createElement(E.a,{value:"remember",color:"primary"}),label:"Remember me"}),a.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit},"Sign In"))))},N="ADD_USER",k="USER_CREATED",S="SEND_MESSAGE",U="MESSAGE_SENT",_="GET_MESSAGES",I="CLEAR_MESSAGES",M="GET_ROOMS",T="ROOM_LIST",D="CREATE_ROOM",C="JOIN_ROOM",L="ENTER_ROOM",P=function(e,t){return{type:C,payload:{roomId:e,roomName:t}}},A=function(e){return{type:_,payload:e}},F=Object(p.b)(function(){return{}},function(e){return{handleSubmit:function(t,n){var r;t.preventDefault(),e((r=n.value,{type:N,payload:r}))}}})(R),W=n(199),G=n(321),J=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){var e=c.a.findDOMNode(this);e.scrollTop=e.scrollHeight}},{key:"render",value:function(){return this.props.currentRoom?a.a.createElement("ul",{className:"message-list"},a.a.createElement(G.Scrollbars,{style:{height:"100%"}},this.props.messages.map(function(e,t){return a.a.createElement("li",{key:t},a.a.createElement("div",{className:"message"},a.a.createElement("img",{src:"".concat(e[3]),className:"profile-photo",alt:"profile"}),a.a.createElement("div",{className:"message-details"},a.a.createElement("div",{className:"date-name"},a.a.createElement("span",{className:"message-sender"},"".concat(e[0])),a.a.createElement("span",{className:"message-date"}," ".concat(e[2].slice(11,16)," PM"))),a.a.createElement("div",{className:"message-text"},a.a.createElement("p",{className:"texte"},e[1])))))}))):a.a.createElement("div",{className:"message-list"},a.a.createElement("div",{className:"join-room"},"\u2190Join a room!"))}}]),t}(r.Component),H=Object(p.b)(function(e){return{messages:e.messages.messagess,currentRoom:e.rooms.currentRoomId,currentUser:e.user.currentUser}},function(e,t){return{dispatch:function(){t(A(e))}}})(J),X=function(e){return a.a.createElement("div",{className:"current-room"},a.a.createElement("h1",{className:"room-name"},e.currentRoom?"#".concat(e.currentRoom):""))},Z=Object(p.b)(function(e){return{currentRoom:e.rooms.currentRoomName}})(X),q=Object(w.a)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}),z=function(e){var t,n=q();return a.a.createElement("form",{onSubmit:function(n){return e.dispatch(n),t.value=""},className:"input-field"},a.a.createElement(v.a,{disabled:!e.currentRoom,id:"message",label:"Type a Message",className:n.textField,type:"text",autoComplete:"off",margin:"normal",fullWidth:!0,inputRef:function(e){t=e}}),a.a.createElement("button",{className:"submit send-button",disabled:!e.currentRoom}))},B=Object(p.b)(function(e){return{currentRoom:e.rooms.currentRoomId}},function(e){return{dispatch:function(t){var n;e((n=t.target[0].value,{type:S,payload:n})),t.preventDefault()}}})(z),Q=function(e){return a.a.createElement("div",{className:"room-list"},a.a.createElement("ul",null,a.a.createElement("h2",null,"ROOMS:"),a.a.createElement("hr",null),e.rooms.map(function(t){var n=e.currentRoomId===t.id?"active":"";return a.a.createElement("li",{key:t.id,className:"room "+n},a.a.createElement("a",{href:"/#",onClick:function(){return e.subscribe(t.id,t.name,e.user)}},"#",t.name))})))},V=Object(p.b)(function(e){return{rooms:e.rooms.joinableRooms,user:e.user.userProporties,currentRoomId:e.rooms.currentRoomId}},function(e){return{dispatch:function(t){e(P(t))},subscribe:function(t,n,r){e(P(t,n)),r.subscribeToRoom({roomId:t,messageLimit:100,hooks:{onMessage:function(t){var n=[t.senderId,t.text,t.createdAt,t.sender.avatarURL];e(A(n))}}})}}})(Q),Y=Object(w.a)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(0),marginRight:e.spacing(1)}}}),$=function(e){var t,n=Y();return a.a.createElement("form",{onSubmit:function(n){return e.handleSubmit(n),t.value=""},className:"new-room-form"},a.a.createElement(v.a,{id:"room",label:"Create room",className:n.textField,type:"text",autoComplete:"off",margin:"normal",fullWidth:!0,inputRef:function(e){t=e}}),a.a.createElement("button",{className:"submit room-button"}))},K=Object(p.b)(null,function(e){return{handleSubmit:function(t){var n;e((n=t.target[0].value,{type:D,payload:n})),t.preventDefault()}}})($),ee=function(e){return a.a.createElement("div",{className:"current-user"},a.a.createElement("img",{src:"http://pixelmator-pro.s3.amazonaws.com/community/avatar_empty@2x.png",className:"profile-photo",alt:"profile"}),a.a.createElement("h2",{className:"user-name"},e.currentUser))},te=Object(p.b)(function(e){return{currentUser:e.user.currentUser}})(ee),ne=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;new W.ChatManager({instanceLocator:"v1:us1:a424e95a-3dd1-4577-bf41-581ed7120785",userId:this.props.currentUser,tokenProvider:new W.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/a424e95a-3dd1-4577-bf41-581ed7120785/token"})}).connect().then(function(t){e.props.connectUser(t),e.props.dispatch()}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return a.a.createElement("div",{className:"chat-app"},a.a.createElement(V,null),a.a.createElement(K,null),a.a.createElement(te,null),a.a.createElement(Z,null),a.a.createElement(H,null),a.a.createElement(B,null))}}]),t}(r.Component),re=Object(p.b)(function(e){return{currentUser:e.user.currentUser,proporties:e.user.userProporties}},function(e){return{dispatch:function(){e({type:M})},connectUser:function(t){e(function(e){return{type:"USER_PROPORTIES",payload:e}}(t))}}})(ne),ae=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={wiew:!1},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this.props.currentUser;e.wiew!==n&&this.setState({wiew:!0})}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},this.props.user?a.a.createElement(re,null):a.a.createElement(F,null))}}]),t}(r.Component),oe=Object(p.b)(function(e){return{user:e.user.currentUser}})(ae);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=n(50),se=n(322),ue={messages:[]},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object.assign({},e,{messagess:e.messagess.concat([t.payload])});case I:return Object.assign({},e,{messagess:[]});default:return e}},le={currentUser:"",currentId:"",userProporties:null,users:[]},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;return t.type===k?Object.assign({},e,{currentUser:e.currentUser.concat(t.payload),currentId:e.currentUser.concat(t.payload)}):"USER_PROPORTIES"===t.type?Object.assign({},e,{userProporties:t.payload,user:t.payload.users}):e},pe={currentRoomId:null,currentRoomName:"",joinableRooms:[],joinedRooms:[]},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object.assign({},e,{joinableRooms:t.payload});case L:return Object.assign({},e,{currentRoomId:t.payload.roomId,currentRoomName:t.payload.roomName});default:return e}},fe=Object(ce.c)({messages:ie,user:me,rooms:de}),be=n(13),ve=n.n(be),he=n(22),Ee=ve.a.mark(ge),Oe=ve.a.mark(ye);function ge(){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(N,ye);case 2:case"end":return e.stop()}},Ee)}function ye(e){var t,r,a,o;return ve.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=!1,r=e.payload,a=n(207),o=new a.default({instanceLocator:"v1:us1:a424e95a-3dd1-4577-bf41-581ed7120785",key:"8a5a334a-de88-46ac-9efd-7230b4fb38b0:JiFCebLQ2pofO6+fMpuMHEPYoRy4ZUcH/1vNOsnZqwo="}),c.next=7,o.createUser({id:r,name:r,avatarURL:"http://pixelmator-pro.s3.amazonaws.com/community/avatar_empty@2x.png"}).then(function(e){t=!0}).catch(function(e){400===e.status?t=!0:console.log(e.status)});case 7:if(!t){c.next=10;break}return c.next=10,Object(he.b)({type:k,payload:r});case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(0),console.log(c.t0);case 15:case"end":return c.stop()}},Oe,null,[[0,12]])}var we=ge,xe=ve.a.mark(Re),je=ve.a.mark(Ne);function Re(){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(M,Ne);case 2:case"end":return e.stop()}},xe)}function Ne(e){var t,r,a;return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n(207),a=new r.default({instanceLocator:"v1:us1:a424e95a-3dd1-4577-bf41-581ed7120785",key:"8a5a334a-de88-46ac-9efd-7230b4fb38b0:JiFCebLQ2pofO6+fMpuMHEPYoRy4ZUcH/1vNOsnZqwo="}),e.next=5,a.getRooms({}).then(function(e){return t=e}).catch(function(e){return console.error(e)});case 5:if(!t){e.next=8;break}return e.next=8,Object(he.b)({type:T,payload:t});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},je,null,[[0,10]])}var ke=Re,Se=ve.a.mark(_e),Ue=ve.a.mark(Ie);function _e(){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(S,Ie);case 2:case"end":return e.stop()}},Se)}function Ie(e){var t,n,r,a,o;return ve.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,n=function(e){return e.user.userProporties},c.next=5,Object(he.c)(n);case 5:return r=c.sent,a=function(e){return e.rooms.currentRoomId},c.next=9,Object(he.c)(a);case 9:o=c.sent,r.sendMessage({text:t,roomId:o}),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.log(c.t0);case 16:case"end":return c.stop()}},Ue,null,[[0,13]])}var Me=_e,Te=ve.a.mark(Ce),De=ve.a.mark(Le);function Ce(){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(D,Le);case 2:case"end":return e.stop()}},Te)}function Le(e){var t,n,r,a;return ve.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t=function(e){return e.user.userProporties},o.next=4,Object(he.c)(t);case 4:if(n=o.sent,r=!1,!((a=e.payload).length>0)){o.next=10;break}return o.next=10,n.createRoom({name:a}).then(r=!0).catch(function(e){return console.log(e)});case 10:if(!r){o.next=13;break}return o.next=13,Object(he.b)({type:M});case 13:o.next=18;break;case 15:o.prev=15,o.t0=o.catch(0),console.log(o.t0);case 18:case"end":return o.stop()}},De,null,[[0,15]])}var Pe=Ce,Ae=ve.a.mark(Ge),Fe=ve.a.mark(Je),We=ve.a.mark(He);function Ge(){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(C,Je);case 2:return e.next=4,Object(he.d)(_,He);case 4:case"end":return e.stop()}},Ae)}function Je(e){return ve.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(he.b)({type:I});case 3:if(!e.payload.roomId){t.next=7;break}return t.next=7,Object(he.b)({type:L,payload:e.payload});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}},Fe,null,[[0,9]])}function He(e){return ve.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(he.b)({type:U,payload:e.payload});case 2:case"end":return t.stop()}},We)}var Xe=Ge,Ze=ve.a.mark(qe);function qe(){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.a)([we(),ke(),Pe(),Xe(),Me()]);case 2:case"end":return e.stop()}},Ze)}var ze=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Be=Object(se.a)(),Qe=Object(ce.e)(fe,Object(ce.d)(Object(ce.a)(Be),ze));Be.run(qe);var Ve=Qe;c.a.render(a.a.createElement(p.a,{store:Ve}," ",a.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[328,1,2]]]);
//# sourceMappingURL=main.8c7dc422.chunk.js.map